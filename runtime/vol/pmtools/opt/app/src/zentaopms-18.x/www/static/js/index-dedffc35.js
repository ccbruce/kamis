var Ht=Object.defineProperty,Pt=Object.defineProperties;var Kt=Object.getOwnPropertyDescriptors;var ft=Object.getOwnPropertySymbols;var Nt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable;var ht=(e,n,t)=>n in e?Ht(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Y=(e,n)=>{for(var t in n||(n={}))Nt.call(n,t)&&ht(e,t,n[t]);if(ft)for(var t of ft(n))Yt.call(n,t)&&ht(e,t,n[t]);return e},Ee=(e,n)=>Pt(e,Kt(n));var Fe=(e,n,t)=>new Promise((a,o)=>{var i=g=>{try{C(t.next(g))}catch(h){o(h)}},f=g=>{try{C(t.throw(g))}catch(h){o(h)}},C=g=>g.done?a(g.value):Promise.resolve(g.value).then(i,f);C((t=t.apply(e,n)).next())});import{u as le,r as ce,t as re,y as Xe,z as Gt,A as Xt,B as Wt,D as ke,x as zt,G as jt,H as we,c as Dt,I as Ue,k as qt,C as Jt,J as M,K as Ie,a as Vt,b as At,i as Zt,O as Qt,g as en,d as tn,e as nn,h as on,F as sn,M as vt,o as an,f as rn}from"./useSync.hook-76c8b37a.js";import{x as rt,a6 as kt,aJ as un,ah as D,ci as q,cj as J,ck as _t,cg as cn,cl as Qe,U as ln,cm as V,c6 as We,ai as dn,j as de,d as ie,bI as be,f as s,u as Le,a5 as U,o as S,m as X,n as ut,F as ge,A as me,ad as he,aR as se,aa as fe,z as H,c as I,w as x,L as Se,bV as et,bW as He,bX as tt,bY as bt,a4 as ct,y as Ke,aj as gt,R as ve,r as B,cn as pn,a3 as Ne,v as Z,co as mt,G as lt,H as it,e as A,p as _e,t as ue,aI as fn,aU as hn,cp as Ce,cq as Pe,cr as vn,ch as _n,cs as gn,ak as mn,ct as Cn,J as Lt,Q as Ct,c0 as ze,X as je,Y as qe,aY as yn,V as En,cu as Sn,cv as wn,W as Tn,aP as xn,S as Be,c1 as Je}from"./index.js";import{u as dt,d as Fn}from"./index-d344fd8a.js";import{a as Dn,b as yt,l as An,g as kn}from"./plugin-7f473104.js";import{C as bn}from"./index-9cb8d772.js";import{i as Te}from"./icon-9fa44ae0.js";import{N as Ln}from"./NotFoundComponent-70b17fee.js";import"./tables_list-dcbdf74b.js";import"./index-0da1d2ff.js";import"./index-0639a4d3.js";const De=le(),Rn=()=>{rt(()=>{De.setEditCanvas(ce.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),De.setEditCanvas(ce.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content"));const e=De.listenerScale();kt(()=>{De.setEditCanvas(ce.EDIT_LAYOUT_DOM,null),De.setEditCanvas(ce.EDIT_CONTENT_DOM,null),e()})})};var Rt={exports:{}};(function(e){(function(n){var t,a={},o={16:!1,18:!1,17:!1,91:!1},i="all",f={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},C={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},g=function(r){return C[r]||r.toUpperCase().charCodeAt(0)},h=[];for(t=1;t<20;t++)C["f"+t]=111+t;function m(r,p){for(var k=r.length;k--;)if(r[k]===p)return k;return-1}function l(r,p){if(r.length!=p.length)return!1;for(var k=0;k<r.length;k++)if(r[k]!==p[k])return!1;return!0}var c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function u(r){for(t in o)o[t]=r[c[t]]}function d(r){var p,k,b,G,N,pe;if(p=r.keyCode,m(h,p)==-1&&h.push(p),(p==93||p==224)&&(p=91),p in o){o[p]=!0;for(b in f)f[b]==p&&(T[b]=!0);return}if(u(r),!!T.filter.call(this,r)&&p in a){for(pe=j(),G=0;G<a[p].length;G++)if(k=a[p][G],k.scope==pe||k.scope=="all"){N=k.mods.length>0;for(b in o)(!o[b]&&m(k.mods,+b)>-1||o[b]&&m(k.mods,+b)==-1)&&(N=!1);(k.mods.length==0&&!o[16]&&!o[18]&&!o[17]&&!o[91]||N)&&k.method(r,k)===!1&&(r.preventDefault?r.preventDefault():r.returnValue=!1,r.stopPropagation&&r.stopPropagation(),r.cancelBubble&&(r.cancelBubble=!0))}}}function _(r){var p=r.keyCode,k,b=m(h,p);if(b>=0&&h.splice(b,1),(p==93||p==224)&&(p=91),p in o){o[p]=!1;for(k in f)f[k]==p&&(T[k]=!1)}}function y(){for(t in o)o[t]=!1;for(t in f)T[t]=!1}function T(r,p,k){var b,G;b=v(r),k===void 0&&(k=p,p="all");for(var N=0;N<b.length;N++)G=[],r=b[N].split("+"),r.length>1&&(G=$(r),r=[r[r.length-1]]),r=r[0],r=g(r),r in a||(a[r]=[]),a[r].push({shortcut:b[N],scope:p,method:k,key:b[N],mods:G})}function R(r,p){var k,b,G=[],N,pe,xe;for(k=v(r),pe=0;pe<k.length;pe++){if(b=k[pe].split("+"),b.length>1&&(G=$(b),r=b[b.length-1]),r=g(r),p===void 0&&(p=j()),!a[r])return;for(N=0;N<a[r].length;N++)xe=a[r][N],xe.scope===p&&l(xe.mods,G)&&(a[r][N]={})}}function O(r){return typeof r=="string"&&(r=g(r)),m(h,r)!=-1}function L(){return h.slice(0)}function P(r){var p=(r.target||r.srcElement).tagName;return!(p=="INPUT"||p=="SELECT"||p=="TEXTAREA")}for(t in f)T[t]=!1;function W(r){i=r||"all"}function j(){return i||"all"}function E(r){var p,k,b;for(p in a)for(k=a[p],b=0;b<k.length;)k[b].scope===r?k.splice(b,1):b++}function v(r){var p;return r=r.replace(/\s/g,""),p=r.split(","),p[p.length-1]==""&&(p[p.length-2]+=","),p}function $(r){for(var p=r.slice(0,r.length-1),k=0;k<p.length;k++)p[k]=f[p[k]];return p}function K(r,p,k){r.addEventListener?r.addEventListener(p,k,!1):r.attachEvent&&r.attachEvent("on"+p,function(){k(window.event)})}K(document,"keydown",function(r){d(r)}),K(document,"keyup",_),K(window,"focus",y);var z=n.key;function w(){var r=n.key;return n.key=z,r}n.key=T,n.key.setScope=W,n.key.getScope=j,n.key.deleteScope=E,n.key.filter=P,n.key.isPressed=O,n.key.getPressedKeyCodes=L,n.key.noConflict=w,n.key.unbind=R,e.exports=T})(un)})(Rt);var te=Rt.exports;const ne=le(),ae=e=>`${q.CTRL}+${e}`,Me=e=>`${q.SHIFT}+${e}`,Q={[D.ARROW_UP]:ae("up"),[D.ARROW_RIGHT]:ae("right"),[D.ARROW_DOWN]:ae("down"),[D.ARROW_LEFT]:ae("left"),[D.COPY]:ae("c"),[D.CUT]:ae("x"),[D.PARSE]:ae("v"),[D.DELETE]:"delete",[D.BACK]:ae("z"),[D.FORWORD]:ae(Me("z")),[D.GROUP]:ae("g"),[D.UN_GROUP]:ae(Me("g")),[D.LOCK]:ae("l"),[D.UNLOCK]:ae(Me("l")),[D.HIDE]:ae("h"),[D.SHOW]:ae(Me("h"))},oe=e=>`${J.CTRL}+${e}`,$e=e=>`${J.SHIFT}+${e}`,ee={[D.ARROW_UP]:oe("arrowup"),[D.ARROW_RIGHT]:oe("arrowright"),[D.ARROW_DOWN]:oe("arrowdown"),[D.ARROW_LEFT]:oe("arrowleft"),[D.COPY]:oe("c"),[D.CUT]:oe("x"),[D.PARSE]:oe("v"),[D.DELETE]:oe("backspace"),[D.BACK]:oe("z"),[D.FORWORD]:oe($e("z")),[D.GROUP]:oe("g"),[D.UN_GROUP]:oe($e("g")),[D.LOCK]:oe("l"),[D.UNLOCK]:oe($e("l")),[D.HIDE]:oe("h"),[D.SHOW]:oe($e("h"))},On=[Q.up,Q.right,Q.down,Q.left,Q.delete,Q.copy,Q.cut,Q.parse,Q.back,Q.forward,Q.group,Q.unGroup,Q.lock,Q.unLock,Q.hide,Q.show],Bn=[ee.up,ee.right,ee.down,ee.left,ee.delete,ee.copy,ee.cut,ee.parse,ee.back,ee.forward,ee.group,ee.unGroup,ee.lock,ee.unLock,ee.hide,ee.show],Mn=()=>{window.$KeyboardActive={ctrl:!1,space:!1},document.onkeydown=e=>{const{keyCode:n}=e;if(n==32&&e.target==document.body&&e.preventDefault(),[17,32].includes(n)&&window.$KeyboardActive)switch(_t(e.keyCode),n){case 17:window.$KeyboardActive.ctrl=!0;break;case 32:window.$KeyboardActive.space=!0;break}},document.onkeyup=e=>{const{keyCode:n}=e;if(n==32&&e.target==document.body&&e.preventDefault(),[17,32].includes(n)&&window.$KeyboardActive)switch(_t(),n){case 17:window.$KeyboardActive.ctrl=!1;break;case 32:window.$KeyboardActive.space=!1;break}}},$n=()=>{const n=(t,a)=>{switch(a){case t.up:te(a,re(()=>(ne.setMove(D.ARROW_UP),!1),50));break;case t.right:te(a,re(()=>(ne.setMove(D.ARROW_RIGHT),!1),50));break;case t.down:te(a,re(()=>(ne.setMove(D.ARROW_DOWN),!1),50));break;case t.left:te(a,re(()=>(ne.setMove(D.ARROW_LEFT),!1),50));break;case t.delete:te(a,Xe(()=>(ne.removeComponentList(),!1),50));break;case t.copy:te(a,Xe(()=>(ne.setCopy(),!1),50));break;case t.cut:te(a,Xe(()=>(ne.setCut(),!1),50));break;case t.parse:te(a,re(()=>(ne.setParse(),!1),50));break;case t.back:te(a,re(()=>(ne.setBack(),!1),50));break;case t.forward:te(a,re(()=>(ne.setForward(),!1),50));break;case t.group:te(a,re(()=>(ne.setGroup(),!1),50));break;case t.unGroup:te(a,re(()=>(ne.setUnGroup(),!1),50));break;case t.lock:te(a,re(()=>(ne.setLock(),!1),50));break;case t.unLock:te(a,re(()=>(ne.setUnLock(),!1),50));break;case t.hide:te(a,re(()=>(ne.setHide(),!1),50));break;case t.show:te(a,re(()=>(ne.setShow(),!1),50));break}};On.forEach(t=>{n(Q,t)}),Bn.forEach(t=>{n(ee,t)}),Mn()},F=le(),{onClickOutSide:In}=dt(),Un=e=>Fe(void 0,null,function*(){e.preventDefault();try{Dn();const n=e.dataTransfer.getData(cn.DRAG_KEY);if(!n){yt();return}F.setEditCanvas(ce.IS_CREATE,!1);const t=Qe(n);let a,o;if(t.sourceID){let i=yield Gt(t.sourceID,t.category);if(!i){window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...");return}a=i.chartConfig,Xt(i,"design");const f=Wt(i.chartConfig);o=new f.default(i.chartConfig),o=ke.exports.merge({},o,i),o.id=ln()}else o=yield zt(t);V(o,e.offsetX-o.attr.w/2,e.offsetY-o.attr.h/2),F.addComponentList(o,!1,!0),F.setTargetSelectChart(o.id),yt()}catch(n){An(),window.$message.warning("\u56FE\u8868\u6B63\u5728\u7814\u53D1\u4E2D, \u656C\u8BF7\u671F\u5F85...")}}),Et=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},Ot=(e,n)=>{if(n){F.setTargetSelectChart(n.id);return}F.setTargetSelectChart(void 0)},Hn=(e,n)=>{var h;if(e.which==2||(h=window.$KeyboardActive)!=null&&h.space)return;Ot();const t=e.offsetX,a=e.offsetY,o=e.screenX,i=e.screenY,f=F.getEditCanvas.scale;F.setMousePosition(void 0,void 0,t,a);const C=ke.exports.throttle(m=>{F.setTargetSelectChart(),F.setEditCanvas(ce.IS_SELECT,!0);const l=t+m.screenX-o,c=a+m.screenY-i;F.setMousePosition(l,c);const u={x1:0,y1:0,x2:0,y2:0};l>t&&c>a?(u.x1=t,u.y1=a,u.x2=Math.round(t+(m.screenX-o)/f),u.y2=Math.round(a+(m.screenY-i)/f)):l>t&&c<a?(u.x1=t,u.y1=Math.round(a-(i-m.screenY)/f),u.x2=Math.round(t+(m.screenX-o)/f),u.y2=a):l<t&&c>a?(u.x1=Math.round(t-(o-m.screenX)/f),u.y1=a,u.x2=t,u.y2=Math.round(a+(m.screenY-i)/f)):(u.x1=Math.round(t-(o-m.screenX)/f),u.y1=Math.round(a-(i-m.screenY)/f),u.x2=t,u.y2=a),F.getComponentList.forEach(d=>{if(!F.getTargetChart.selectId.includes(d.id)){const{x:_,y,w:T,h:R}=d.attr,O={x1:_,y1:y,x2:_+T,y2:y+R};O.x1-u.x1>=0&&O.y1-u.y1>=0&&O.x2-u.x2<=0&&O.y2-u.y2<=0&&!d.status.lock&&!d.status.hide&&F.setTargetSelectChart(d.id,!0)}})},30),g=()=>{C.cancel(),F.setEditCanvas(ce.IS_SELECT,!1),F.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",g)},Bt=()=>({mouseClickHandle:(o,i)=>{var f;if(o.preventDefault(),o.stopPropagation(),!i.status.lock&&(f=window.$KeyboardActive)!=null&&f.ctrl)if(F.targetChart.selectId.includes(i.id)){const C=F.targetChart.selectId.filter(g=>g!==i.id);F.setTargetSelectChart(C)}else F.setTargetSelectChart(i.id,!0)},mousedownHandle:(o,i)=>{var y;if(o.preventDefault(),o.stopPropagation(),i.status.lock||(In(),o.buttons===We.LEFT&&((y=window.$KeyboardActive)==null?void 0:y.ctrl)))return;const f=F.getTargetChart.selectId;if(o.buttons===We.RIGHT&&f.length>1&&f.includes(i.id)||(F.setTargetSelectChart(i.id),o.buttons===We.RIGHT))return;const C=F.getEditCanvas.scale,g=F.getEditCanvasConfig.width,h=F.getEditCanvasConfig.height,m=new Map;F.getTargetChart.selectId.forEach(T=>{const R=F.fetchTargetIndex(T);if(R!==-1){const{x:O,y:L,w:P,h:W}=dn(F.getComponentList[R]).attr;m.set(T,{x:O,y:L,w:P,h:W})}});const l=o.screenX,c=o.screenY;let u=[];F.getTargetChart.selectId.forEach(T=>{if(!m.has(T))return;const R=F.fetchTargetIndex(T);u.push(ke.exports.cloneDeep(F.getComponentList[R]))}),F.setMousePosition(void 0,void 0,l,c);const d=ke.exports.throttle(T=>{F.setEditCanvas(ce.IS_DRAG,!0),F.setMousePosition(T.screenX,T.screenY);let R=(T.screenX-l)/C,O=(T.screenY-c)/C;F.getTargetChart.selectId.forEach(L=>{if(!m.has(L))return;const P=F.fetchTargetIndex(L),{x:W,y:j,w:E,h:v}=m.get(L),$=F.getComponentList[P];let K=Math.round(W+R),z=Math.round(j+O);const w=50;K=K<-E+w?-E+w:K,z=z<-v+w?-v+w:z,K=K>g-w?g-w:K,z=z>h-w?h-w:z,$&&!Number.isNaN(K)&&!Number.isNaN(z)&&($.attr=Object.assign($.attr,{x:K,y:z}))})},20),_=()=>{try{F.setMousePosition(0,0,0,0),F.setEditCanvas(ce.IS_DRAG,!1),u.length&&(F.getTargetChart.selectId.forEach(T=>{if(!m.has(T))return;const R=F.fetchTargetIndex(T),O=F.getComponentList[R];u.forEach(L=>{L.id===T&&(L.attr=Object.assign(L.attr,{offsetX:O.attr.x-L.attr.x,offsetY:O.attr.y-L.attr.y}))})}),F.moveComponentList(u)),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",_)}catch(T){console.log(T)}};document.addEventListener("mousemove",d),document.addEventListener("mouseup",_)},mouseenterHandle:(o,i)=>{o.preventDefault(),o.stopPropagation(),F.getEditCanvas.isSelect||F.setTargetHoverChart(i.id)},mouseleaveHandle:(o,i)=>{o.preventDefault(),o.stopPropagation(),F.setEditCanvas(ce.IS_DRAG,!1),F.setTargetHoverChart(void 0)}}),Pn=(e,n,t)=>{e.stopPropagation(),e.preventDefault(),F.setEditCanvas(ce.IS_DRAG,!0);const a=F.getEditCanvas.scale,o=t.x,i=t.y,f=t.w,C=t.h,g=t.lockScale,h=t.scaleRatio,m=t.minWidth,l=e.screenX,c=e.screenY,u=f-m;F.setMousePosition(l,c);const d=ke.exports.throttle(y=>{F.setMousePosition(y.screenX,y.screenY);let T=Math.round((y.screenX-l)/a),R=Math.round((y.screenY-c)/a);const O=/t/.test(n),L=/b/.test(n),P=/l/.test(n),W=/r/.test(n);let j=C+(O?-R:L?R:0),E=f+(P?-T:W?T:0);g&&((O||L)&&(E=Math.round(j*h)),(P||W)&&(j=Math.round(E/h))),P&&(E<m&&u>0&&(T=u),u===0&&T>0&&(T=0)),t.h=j>0?j:0,t.w=E>0?E:0,t.x=o+(P?T:0),t.y=i+(O?R:0)},50),_=()=>{F.setEditCanvas(ce.IS_DRAG,!1),F.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",_)};const Kn=["onMousedown"],Nn=ie({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const n=e;be(l=>({"026d39a0":s(f)}));const t=Le(),a=le(),o=["t","r","b","l","lt","rt","lb","rb"],i=["n","e","s","w","nw","ne","sw","se"],f=U(()=>t.getAppTheme),C=U(()=>n.item.status.lock?!1:n.item.id===a.getTargetChart.hoverId),g=U(()=>{const l=n.item.id;return n.item.status.lock?!1:a.getTargetChart.selectId.find(c=>c===l)}),h=U(()=>n.item.status.lock),m=U(()=>n.item.status.hide);return(l,c)=>(S(),X("div",{class:he(["go-shape-box",{lock:s(h),hide:s(m)}])},[ut(l.$slots,"default",{},void 0,!0),e.hiddenPoint?fe("",!0):(S(!0),X(ge,{key:0},me(s(g)?o:[],(u,d)=>(S(),X("div",{class:he(`shape-point ${u}`),key:d,style:se(s(jt)(u,d,e.item.attr,i)),onMousedown:_=>s(Pn)(_,u,e.item.attr)},null,46,Kn))),128)),H("div",{class:"shape-modal",style:se(s(we)(e.item.attr))},[H("div",{class:he(["shape-modal-select",{active:s(g)}])},null,2),H("div",{class:he(["shape-modal-change",{selectActive:s(g),hoverActive:s(C)}])},null,2)],4)],2))}});var nt=de(Nn,[["__scopeId","data-v-5f8854aa"]]);const Yn={class:"go-edit-group-box"},Gn=ie({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const n=le(),{handleContextMenu:t}=dt(),{mouseenterHandle:a,mouseleaveHandle:o,mousedownHandle:i,mouseClickHandle:f}=Bt(),C=(m,l,c)=>{const u=d=>l.filter(_=>d.includes(_.key));if(n.getTargetChart.selectId.length>1)return u([D.GROUP,D.DELETE]);{const d=[];c.status.lock?d.push(D.LOCK):d.push(D.UNLOCK),c.status.hide?d.push(D.HIDE):d.push(D.SHOW);const _=[D.UN_GROUP];return[...u(_),Fn(),...m.filter(y=>!d.includes(y.key))]}},g=U(()=>{const m=n.getEditCanvasConfig.chartThemeColor;return Dt[m]}),h=U(()=>n.getEditCanvasConfig.chartThemeSetting);return(m,l)=>(S(),X("div",Yn,[(S(),I(s(nt),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:he(s(et)(e.groupData.styles.animations)),style:se(Y(Y(Y(Y(Y({},s(Ue)(e.groupData.attr,e.groupIndex)),s(we)(e.groupData.attr)),s(He)(e.groupData.styles)),s(tt)(e.groupData.styles)),s(bt)(e.groupData.styles))),onClick:l[0]||(l[0]=c=>s(f)(c,e.groupData)),onMousedown:l[1]||(l[1]=c=>s(i)(c,e.groupData)),onMouseenter:l[2]||(l[2]=c=>s(a)(c,e.groupData)),onMouseleave:l[3]||(l[3]=c=>s(o)(c,e.groupData)),onContextmenu:l[4]||(l[4]=c=>s(t)(c,e.groupData,C))},{default:x(()=>[(S(!0),X(ge,null,me(e.groupData.groupList,c=>(S(),I(s(nt),{key:c.id,"data-id":c.id,index:e.groupIndex,item:c,hiddenPoint:!0,style:se(Y({},s(Ue)(c.attr,e.groupIndex)))},{default:x(()=>[(S(),I(Se(c.chartConfig.chartKey),{class:he(["edit-content-chart",s(et)(c.styles.animations)]),chartConfig:c,themeSetting:s(h),themeColor:s(g),style:se(Y(Y(Y({},s(we)(c.attr)),s(He)(c.styles)),s(tt)(c.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}});const Xn={class:"go-edit-align-line"},Wn=ie({__name:"index",setup(e){be(d=>({"32d4d33a":s(f)}));const n=Le(),t=le(),a=ct(),o=Ke({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),i=d=>d?{left:`${d.x?d.x:0}px`,top:`${d.y?d.y:0}px`}:{},f=U(()=>n.getAppTheme),C=U(()=>a.getChartAlignRange),g=U(()=>t.getEditCanvas[ce.IS_DRAG]),h=(d,_)=>Math.abs(d-_)<=C.value,m=U(()=>t.getTargetChart.selectId),l=U(()=>t.getComponentList[t.fetchTargetIndex()]),c=U(()=>{var d;return((d=l.value)==null?void 0:d.attr)||{}}),u=U(()=>({id:"0",attr:{w:gt(t.getEditCanvasConfig.width),h:gt(t.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0,scaleRatio:1.5,lockScale:!1,disabledHeight:!1,minWidth:50}}));return ve(()=>t.getMousePosition,re(()=>{try{if(!g.value||m.value.length!==1)return;const d=c.value.w,_=c.value.h,y=c.value.x,T=y+d/2,R=y+d,O=[y,T,R],L=c.value.y,P=L+_/2,W=L+_,j=[L,P,W];o.select.clear(),o.sorptioned.y=!1;const E=t.getComponentList.map(v=>({id:v.id,attr:v.attr}));E.push(u.value),o.lineArr.forEach(v=>{E.forEach($=>{if(m.value[0]===$.id)return;const K=$.attr.w,z=$.attr.h,w=$.attr.x,r=w+K/2,p=w+K,k=[w,r,p],b=$.attr.y,G=b+z/2,N=b+z,pe=[b,G,N];v.includes("rowt")&&(h(L,b)&&(o.select.set(v,{y:b}),V(l.value,y,b)),h(L,G)&&(o.select.set(v,{y:G}),V(l.value,y,G)),h(L,N)&&(o.select.set(v,{y:N}),V(l.value,y,N))),v.includes("rowc")&&(h(P,b)&&(o.select.set(v,{y:b}),V(l.value,y,b-_/2)),h(P,G)&&(o.select.set(v,{y:G}),V(l.value,y,G-_/2)),h(P,N)&&(o.select.set(v,{y:N}),V(l.value,y,N-_/2))),v.includes("rowb")&&(h(W,b)&&(o.select.set(v,{y:b}),V(l.value,y,b-_)),h(W,G)&&(o.select.set(v,{y:G}),V(l.value,y,G-_)),h(W,N)&&(o.select.set(v,{y:N}),V(l.value,y,N-_))),v.includes("coll")&&(h(y,w)&&(o.select.set(v,{x:w}),V(l.value,w,L)),h(y,r)&&(o.select.set(v,{x:r}),V(l.value,r,L)),h(y,p)&&(o.select.set(v,{x:p}),V(l.value,p,L))),v.includes("colc")&&(h(T,w)&&(o.select.set(v,{x:w}),V(l.value,w-d/2,L)),h(T,r)&&(o.select.set(v,{x:r}),V(l.value,r-d/2,L)),h(T,p)&&(o.select.set(v,{x:p}),V(l.value,p-d/2,L))),v.includes("colr")&&(h(R,w)&&(o.select.set(v,{x:w}),V(l.value,w-d,L)),h(R,r)&&(o.select.set(v,{x:r}),V(l.value,r-d,L)),h(R,p)&&(o.select.set(v,{x:p}),V(l.value,p-d,L)))})})}catch(d){console.log(d)}},200),{deep:!0}),ve(()=>g.value,d=>{d||(o.select.clear(),o.sorptioned.y=!1)}),(d,_)=>(S(),X("div",Xn,[(S(!0),X(ge,null,me(o.lineArr,y=>(S(),X("div",{class:he(["line",[y.includes("row")?"row":"col",o.select.has(y)&&"visible"]]),key:y,style:se(i(o.select.get(y)))},null,6))),128))]))}});var zn=de(Wn,[["__scopeId","data-v-41123ead"]]);const jn=ie({__name:"index",setup(e){return(n,t)=>{const a=B("n-watermark");return S(),I(a,{id:"go-edit-watermark",content:s(pn),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});var qn=de(jn,[["__scopeId","data-v-e5cd93da"]]);const Mt=e=>(lt("data-v-6aae2e54"),e=e(),it(),e),Jn=Mt(()=>H("div",{class:"select-background"},null,-1)),Vn=Mt(()=>H("div",{class:"select-border"},null,-1)),Zn=[Jn,Vn],Qn=ie({__name:"index",setup(e){be(C=>({bb49f51e:s(i)}));const n=Le(),t=le(),{isSelect:a,scale:o}=Ne(t.getEditCanvas),i=U(()=>n.getAppTheme),f=Z();return ve(()=>t.getMousePosition,C=>{if(!a.value)return;const{startX:g,startY:h,x:m,y:l}=C,c={zIndex:mt,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0,lockScale:!1,scaleRatio:1.5,disabledHeight:!1,minWidth:50};m>g&&l>h?(c.x=g,c.y=h,c.w=Math.round((m-g)/o.value),c.h=Math.round((l-h)/o.value)):m>g&&l<h?(c.x=g,c.w=Math.round((m-g)/o.value),c.h=Math.round((h-l)/o.value),c.y=h-c.h):m<g&&l>h?(c.y=h,c.w=Math.round((g-m)/o.value),c.h=Math.round((l-h)/o.value),c.x=g-c.w):(c.w=Math.round((g-m)/o.value),c.h=Math.round((h-l)/o.value),c.x=g-c.w,c.y=h-c.h),f.value=Y(Y({},Ue(c,mt)),we(c))},{deep:!0}),(C,g)=>s(a)?(S(),X("div",{key:0,class:"go-edit-select",style:se(f.value)},Zn,4)):fe("",!0)}});var eo=de(Qn,[["__scopeId","data-v-6aae2e54"]]);const to=ie({__name:"index",setup(e){const n=le(),{getEditCanvasConfig:t,getEditCanvas:a}=Ne(n),o=U(()=>({w:t.value.width,h:t.value.height})),i=U(()=>{const C={transform:`scale(${a.value.scale})`};return Y(Y({},we(o.value)),C)}),f=U(()=>{const C=a.value.isCreate&&{"z-index":99999};return Y(Y({},we(o.value)),C)});return(C,g)=>(S(),X("div",{class:"go-edit-range go-transition",style:se(s(i)),onMousedown:g[0]||(g[0]=h=>s(Hn)(h,void 0))},[ut(C.$slots,"default",{},void 0,!0),A(s(qn)),A(s(zn)),A(s(eo)),H("div",{class:"go-edit-range-model",style:se(s(f))},null,4)],36))}});var no=de(to,[["__scopeId","data-v-52e445d0"]]),$t=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ot=!1,st=!1;try{var Ve={get passive(){return ot=!0},get once(){return st=ot=!0}};$t&&(window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,!0))}catch(e){}function oo(e,n,t,a){if(a&&typeof a!="boolean"&&!st){var o=a.once,i=a.capture,f=t;!st&&o&&(f=t.__once||function C(g){this.removeEventListener(n,C,i),t.call(this,g)},t.__once=f),e.addEventListener(n,f,ot?a:i)}e.addEventListener(n,t,a)}function so(e,n,t,a){var o=a&&typeof a!="boolean"?a.capture:a;e.removeEventListener(n,t,o),t.__once&&e.removeEventListener(n,t.__once,o)}function St(e,n,t,a){return oo(e,n,t,a),function(){so(e,n,t,a)}}var wt=new Date().getTime();function ao(e){var n=new Date().getTime(),t=Math.max(0,16-(n-wt)),a=setTimeout(e,t);return wt=n,a}var ro=["","webkit","moz","o","ms"],Tt=ao,xt=function(n,t){return n+(n?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};$t&&ro.some(function(e){var n=xt(e,"request");return n in window&&(xt(e,"cancel"),Tt=function(a){return window[n](a)}),!!Tt});Function.prototype.bind.call(Function.prototype.call,[].slice);Function.prototype.bind.call(Function.prototype.call,[].slice);const uo={class:"go-sketch-rule"},co={key:1,class:"fix-edit-screens-block"},lo=ie({__name:"index",setup(e){be(w=>({"0c493a2c":s(W),"57d4e729":c.value}));const n=le(),t=qt(),a=Le(),o=20;let i=[0,0],f=[0,0];const C=Z(),g=Z(!0),h=Z(),m=Z(),l=Z(!1),c=Z("auto"),{width:u,height:d}=Ne(n.getEditCanvasConfig),_=Z(0),y=Z(0),T=Ke({h:[],v:[]}),R=U(()=>n.getEditCanvas.scale),O=U(()=>u.value*2),L=U(()=>d.value*2),P=U(()=>a.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),W=U(()=>a.getAppTheme),j=w=>{if(w.ctrlKey||w.metaKey){w.preventDefault();let r=R.value;if(w.wheelDelta>=0&&R.value<2){r=R.value+.05,n.setScale(r);return}w.wheelDelta<0&&R.value>.1&&(r=R.value-.05,n.setScale(r))}},E=()=>{if(!C.value)return;const w=C.value.getBoundingClientRect(),r=h.value.getBoundingClientRect();_.value=(w.left+o-r.left)/R.value,y.value=(w.top+o-r.top)/R.value},v=w=>{var G,N;if(w.preventDefault(),w.stopPropagation(),w.which==2)l.value=!0;else if(!((G=window.$KeyboardActive)!=null&&G.space))return;(N=document.activeElement)==null||N.blur();const r=w.pageX,p=w.pageY,k=St(window,"mousemove",pe=>{const xe=pe.pageX-r,Ut=pe.pageY-p,[Ye,Re]=i,[Ge,Oe]=f;i=[Re,xe],f=[Oe,Ut],C.value.scrollLeft-=Re>Ye?Math.abs(Re-Ye):-Math.abs(Re-Ye),C.value.scrollTop-=Oe>Ge?Math.abs(Oe-Ge):-Math.abs(Oe-Ge)}),b=St(window,"mouseup",()=>{k(),b(),i=[0,0],f=[0,0],l.value=!1})},$=()=>{const w=document.getElementById("go-chart-edit-layout");return w?{height:w.clientHeight-25,width:w.clientWidth}:{width:u.value,height:d.value}},K=()=>{g.value=!1,setTimeout(()=>{g.value=!0},10)},z=()=>{const{width:w,height:r}=$();C.value.scrollLeft=O.value/2-w/2,C.value.scrollTop=L.value/2-r/2};return ve(()=>O.value,()=>{z(),n.computedScale()}),ve(()=>a.getDarkTheme,()=>{K()}),ve(()=>R.value,(w,r)=>{r!==w?(t.setItemUnHandle(Jt.RE_POSITION_CANVAS,!1),E(),setTimeout(()=>{z(),K()},400)):re(K,20)}),ve(()=>l.value,w=>{c.value=w?"grab":"auto"}),rt(()=>{C.value&&(C.value.addEventListener("wheel",j,{passive:!1}),z())}),kt(()=>{C.value&&C.value.removeEventListener("wheel",j)}),window.onKeySpacePressHold=w=>{l.value=w},(w,r)=>{const p=B("sketch-rule");return S(),X("div",uo,[g.value?(S(),I(p,{key:0,thick:o,scale:s(R),width:$().width,height:$().height,startX:_.value,startY:y.value,lines:T,palette:s(P)},null,8,["scale","width","height","startX","startY","lines","palette"])):fe("",!0),H("div",{ref_key:"$app",ref:C,class:"edit-screens",onScroll:E},[H("div",{ref_key:"$container",ref:m,class:"edit-screen-container",style:se({width:s(O)+"px",height:s(L)+"px"})},[H("div",{ref_key:"refSketchRuleBox",ref:h,class:"canvas",onMousedown:v,style:se({marginLeft:"-"+($().width/2-25)+"px"})},[H("div",{style:se({pointerEvents:l.value?"none":"auto"})},[ut(w.$slots,"default",{},void 0,!0)],4)],36)],4)],544),s(a).getDarkTheme?(S(),X("div",co)):fe("",!0)])}}});var io=de(lo,[["__scopeId","data-v-2f924d76"]]);const Ze={[M.ADD]:"\u65B0\u589E",[M.DELETE]:"\u5220\u9664",[M.UPDATE]:"\u66F4\u65B0",[M.MOVE]:"\u79FB\u52A8",[M.PASTE]:"\u7C98\u8D34",[M.COPY]:"\u590D\u5236",[M.CUT]:"\u526A\u5207",[M.TOP]:"\u7F6E\u9876",[M.BOTTOM]:"\u7F6E\u5E95",[M.UP]:"\u4E0A\u79FB",[M.DOWN]:"\u4E0B\u79FB",[M.GROUP]:"\u6210\u7EC4",[M.UN_GROUP]:"\u89E3\u7EC4",[M.LOCK]:"\u9501\u5B9A",[M.UNLOCK]:"\u89E3\u9501",[M.HIDE]:"\u9690\u85CF",[M.SHOW]:"\u663E\u793A",[Ie.CANVAS]:"\u753B\u5E03\u521D\u59CB\u5316"};var po=Array.prototype,fo=po.reverse;function ho(e){return e==null?e:fo.call(e)}var vo=ho;const It=e=>(lt("data-v-5a4fd660"),e=e(),it(),e),_o={class:"go-flex-items-center"},go=It(()=>H("span",{class:"btn-text"},"\u5386\u53F2\u8BB0\u5F55",-1)),mo={class:"history-list-box"},Co=["title"],yo=It(()=>H("div",{class:"popover-modal"},null,-1)),Eo=ie({__name:"index",setup(e){const{DesktopOutlineIcon:n,PencilIcon:t,TrashIcon:a,CopyIcon:o,LayersIcon:i,DuplicateIcon:f,HelpOutlineIcon:C,LockClosedOutlineIcon:g,LockOpenOutlineIcon:h,EyeOffOutlineIcon:m,EyeOutlineIcon:l}=Te.ionicons5,{StackedMoveIcon:c,Carbon3DCursorIcon:u,Carbon3DSoftwareIcon:d}=Te.carbon,_=Vt(),y=O=>{if(O.targetType===Ie.CANVAS)return n;switch(O.actionType){case M.UPDATE:return t;case M.DELETE:return a;case M.PASTE:return o;case M.TOP:return i;case M.BOTTOM:return i;case M.UP:return i;case M.DOWN:return i;case M.MOVE:return c;case M.ADD:return f;case M.GROUP:return u;case M.UN_GROUP:return d;case M.LOCK:return g;case M.UNLOCK:return h;case M.HIDE:return m;case M.SHOW:return l;default:return t}},T=O=>{if(O.targetType===Ie.CANVAS)return Ze[Ie.CANVAS];if(O.actionType===M.GROUP||O.actionType===M.UN_GROUP)return`${Ze[O.actionType]}`;if(O.historyData.length)return`${Ze[O.actionType]} - ${O.historyData[0].chartConfig.title}`},R=U(()=>{const L=_.getBackStack.map(P=>({label:T(P),icon:y(P)}));return vo(L.filter(P=>P.label))});return(O,L)=>{const P=B("n-button"),W=B("n-icon"),j=B("n-text"),E=B("n-scrollbar"),v=B("n-popover"),$=B("n-tooltip");return S(),X("div",_o,[A(v,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:x(()=>[A(P,{class:"mr-10",secondary:"",size:"small",disabled:s(R).length===0},{default:x(()=>[go]),_:1},8,["disabled"])]),default:x(()=>[H("div",mo,[A(E,{style:{"max-height":"500px"}},{default:x(()=>[(S(!0),X(ge,null,me(s(R),(K,z)=>(S(),X("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:z,title:K.label},[A(W,{class:"item-icon",size:"16",depth:2,component:K.icon},null,8,["component"]),A(j,{depth:"2"},{default:x(()=>[_e(ue(K.label),1)]),_:2},1024)],8,Co))),128))]),_:1}),yo])]),_:1}),A($,{trigger:"hover"},{trigger:x(()=>[A(W,{size:"21",depth:3},{default:x(()=>[A(s(C))]),_:1})]),default:x(()=>[H("span",null,"\u6700\u591A\u53EA\u4FDD\u7559"+ue(s(fn))+"\u6761\u8BB0\u5F55",1)]),_:1})])}}});var So=de(Eo,[["__scopeId","data-v-5a4fd660"]]);const pt=e=>(lt("data-v-3c7b6730"),e=e(),it(),e),wo=pt(()=>H("th",null,"\u529F\u80FD",-1)),To=pt(()=>H("th",null,"Win \u5FEB\u6377\u952E",-1)),xo=pt(()=>H("span",null," Mac \u5FEB\u6377\u952E ",-1)),Fo={key:0},Do={key:1},Ao=ie({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:n}){const t=e,{CloseIcon:a}=Te.ionicons5,o=Z(!1);ve(()=>t.modelShow,C=>{o.value=C});const i=[{label:"\u62D6\u62FD\u753B\u5E03",win:`${q.SPACE.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${J.SPACE.toUpperCase()} + \u{1F5B1}\uFE0F `,macSource:!0},{label:"\u5411 \u4E0A/\u53F3/\u4E0B/\u5DE6 \u79FB\u52A8",win:`${q.CTRL.toUpperCase()} + \u2191 \u6216 \u2192 \u6216 \u2193 \u6216 \u2190`,mac:`${J.CTRL.toUpperCase()} + \u2191 `},{label:"\u9501\u5B9A",win:`${q.CTRL.toUpperCase()} + L `,mac:`${J.CTRL.toUpperCase()} + L `},{label:"\u89E3\u9501",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()}+ L `,mac:`${J.CTRL.toUpperCase()} + ${J.SHIFT.toUpperCase()} + L `},{label:"\u5C55\u793A",win:`${q.CTRL.toUpperCase()} + H `,mac:`${J.CTRL.toUpperCase()} + H `},{label:"\u9690\u85CF",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()} + H `,mac:`${J.CTRL.toUpperCase()} + ${J.SHIFT.toUpperCase()} + H `},{label:"\u5220\u9664",win:"Delete".toUpperCase(),mac:`${J.CTRL.toUpperCase()} + Backspace `},{label:"\u590D\u5236",win:`${q.CTRL.toUpperCase()} + C `,mac:`${J.CTRL.toUpperCase()} + C `},{label:"\u526A\u5207",win:`${q.CTRL.toUpperCase()} + X `,mac:`${J.CTRL.toUpperCase()} + X `},{label:"\u7C98\u8D34",win:`${q.CTRL.toUpperCase()} + V `,mac:`${J.CTRL.toUpperCase()} + V `},{label:"\u540E\u9000",win:`${q.CTRL.toUpperCase()} + Z `,mac:`${J.CTRL.toUpperCase()} + Z `},{label:"\u524D\u8FDB",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()} + Z `,mac:`${J.CTRL.toUpperCase()} + ${J.SHIFT.toUpperCase()} + Z `},{label:"\u591A\u9009",win:`${q.CTRL.toUpperCase()} + \u{1F5B1}\uFE0F `,mac:`${J.CTRL_SOURCE_KEY.toUpperCase()} + \u{1F5B1}\uFE0F `},{label:"\u521B\u5EFA\u5206\u7EC4",win:`${q.CTRL.toUpperCase()} + G / \u{1F5B1}\uFE0F `,mac:`${J.CTRL_SOURCE_KEY.toUpperCase()} + G / \u{1F5B1}\uFE0F`},{label:"\u89E3\u9664\u5206\u7EC4",win:`${q.CTRL.toUpperCase()} + ${q.SHIFT.toUpperCase()} + G `,mac:`${J.CTRL_SOURCE_KEY.toUpperCase()} + ${q.SHIFT.toUpperCase()} + G `}],f=()=>{n("update:modelShow",!1)};return(C,g)=>{const h=B("n-icon"),m=B("n-space"),l=B("n-gradient-text"),c=B("n-table"),u=B("n-modal");return S(),I(u,{show:o.value,"onUpdate:show":g[0]||(g[0]=d=>o.value=d),"mask-closable":!0,onAfterLeave:f},{default:x(()=>[A(c,{class:"model-content",bordered:!1,"single-line":!1},{default:x(()=>[H("thead",null,[H("tr",null,[wo,To,H("th",null,[A(m,{justify:"space-between"},{default:x(()=>[xo,A(h,{size:"20",class:"go-cursor-pointer",onClick:f},{default:x(()=>[A(s(a))]),_:1})]),_:1})])])]),H("tbody",null,[(S(),X(ge,null,me(i,(d,_)=>H("tr",{key:_},[H("td",null,ue(d.label),1),H("td",null,ue(d.win),1),d.macSource?(S(),X("td",Fo,ue(d.mac),1)):(S(),X("td",Do,[A(l,{size:22},{default:x(()=>[_e(ue(d.mac.substr(0,1)),1)]),_:2},1024),_e(" + "+ue(d.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});var ko=de(Ao,[["__scopeId","data-v-3c7b6730"]]);const bo={class:"go-edit-shortcut"},Lo=ie({__name:"index",setup(e){const n=Z(!1);return(t,a)=>{const o=B("n-button");return S(),X("div",bo,[A(ko,{modelShow:n.value,"onUpdate:modelShow":a[0]||(a[0]=i=>n.value=i)},null,8,["modelShow"]),A(o,{class:"scale-btn",onClick:a[1]||(a[1]=i=>n.value=!0)},{default:x(()=>[_e(" \u5FEB\u6377\u952E")]),_:1})])}}});var Ro=de(Lo,[["__scopeId","data-v-2a5a05ce"]]);const Oo={class:"go-edit-bottom"},Bo=ie({__name:"index",setup(e){be(y=>({f3add9fc:o.value}));const{LockClosedOutlineIcon:n,LockOpenOutlineIcon:t}=Te.ionicons5,a=Le(),o=Z(a.getAppTheme),i=le(),{lockScale:f,scale:C}=Ne(i.getEditCanvas);let g=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"\u81EA\u9002\u5E94",value:0}];const h=Z(""),m=y=>{if(y===0){i.computedScale();return}i.setScale(y/100)},l=()=>{i.setEditCanvas(ce.LOCK_SCALE,!f.value)},c=Z(100),u=y=>`${y}%`,d=y=>{i.setScale(y/100)},_=Ke({100:""});return hn(()=>{const y=(C.value*100).toFixed(0);h.value=`${y}%`,c.value=parseInt(y)}),(y,T)=>{const R=B("n-text"),O=B("n-space"),L=B("n-select"),P=B("n-icon"),W=B("n-button"),j=B("n-tooltip"),E=B("n-slider");return S(),X("div",Oo,[A(O,null,{default:x(()=>[A(s(So)),A(R,{id:"keyboard-dress-show",depth:"3"})]),_:1}),A(O,{class:"bottom-ri"},{default:x(()=>[A(Ro),A(L,{disabled:s(f),class:"scale-btn",value:h.value,"onUpdate:value":[T[0]||(T[0]=v=>h.value=v),m],size:"mini",options:s(g)},null,8,["disabled","value","options"]),A(j,{trigger:"hover"},{trigger:x(()=>[A(W,{onClick:l,text:""},{default:x(()=>[A(P,{class:he(["lock-icon",{color:s(f)}]),size:"18",depth:2},{default:x(()=>[s(f)?(S(),I(s(n),{key:0})):(S(),I(s(t),{key:1}))]),_:1},8,["class"])]),_:1})]),default:x(()=>[H("span",null,ue(s(f)?"\u89E3\u9501":"\u9501\u5B9A")+"\u5F53\u524D\u6BD4\u4F8B",1)]),_:1}),A(E,{class:"scale-slider",value:c.value,"onUpdate:value":[T[1]||(T[1]=v=>c.value=v),d],"default-value":50,min:10,max:200,step:5,"format-tooltip":u,disabled:s(f),marks:_},null,8,["value","disabled","marks"])]),_:1})])}}});var Mo=de(Bo,[["__scopeId","data-v-99a534fc"]]);const $o=ie({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:n}){const t=e,{HelpOutlineIcon:a,CloseIcon:o}=Te.ionicons5,i=ct(),f=Z(!1),C=Ke([{key:Ce.ASIDE_ALL_COLLAPSED,value:i.getAsideAllCollapsed,type:"switch",name:"\u83DC\u5355\u6298\u53E0",desc:"\u9996\u9875\u83DC\u5355\u6298\u53E0\u65F6\u9690\u85CF\u81F3\u754C\u9762\u5916"},{key:Ce.HIDE_PACKAGE_ONE_CATEGORY,value:i.getHidePackageOneCategory,type:"switch",name:"\u9690\u85CF\u5206\u7C7B",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u8868\u5355\u5206\u7C7B\u53EA\u6709\u5355\u9879\u65F6\u9690\u85CF"},{key:Ce.CHANGE_LANG_RELOAD,value:i.getChangeLangReload,type:"switch",name:"\u5207\u6362\u8BED\u8A00",desc:"\u5207\u6362\u8BED\u8A00\u91CD\u65B0\u52A0\u8F7D\u9875\u9762",tip:"\u82E5\u9047\u5230\u90E8\u5206\u533A\u57DF\u8BED\u8A00\u5207\u6362\u5931\u8D25\uFF0C\u5219\u5EFA\u8BAE\u5F00\u542F"},{key:"divider1",type:"divider",name:"",desc:"",value:""},{key:Ce.CHART_TOOLS_STATUS_HIDE,value:i.getChartToolsStatusHide,type:"switch",name:"\u9690\u85CF\u5DE5\u5177\u680F",desc:"\u9F20\u6807\u79FB\u5165\u65F6\uFF0C\u4F1A\u5C55\u793A\u5207\u6362\u5230\u5C55\u5F00\u6A21\u5F0F"},{key:Ce.CHART_TOOLS_STATUS,value:i.getChartToolsStatus,type:"select",name:"\u5DE5\u5177\u680F\u5C55\u793A",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u5DE5\u5177\u680F\u5C55\u793A\u65B9\u5F0F",options:[{label:"\u4FA7\u8FB9\u680F",value:Pe.ASIDE},{label:"\u5E95\u90E8 Dock",value:Pe.DOCK}]},{key:"divider0",type:"divider",name:"",desc:"",value:""},{key:Ce.CHART_MOVE_DISTANCE,value:i.getChartMoveDistance,type:"number",name:"\u79FB\u52A8\u8DDD\u79BB",min:1,step:1,suffix:"px",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u65B9\u5411\u952E\u63A7\u5236\u79FB\u52A8\u8DDD\u79BB"},{key:Ce.CHART_ALIGN_RANGE,value:i.getChartAlignRange,type:"number",name:"\u5438\u9644\u8DDD\u79BB",min:10,step:2,suffix:"px",desc:"\u5DE5\u4F5C\u7A7A\u95F4\u79FB\u52A8\u56FE\u8868\u65F6\u7684\u5438\u9644\u8DDD\u79BB"}]);ve(()=>t.modelShow,m=>{f.value=m});const g=()=>{n("update:modelShow",!1)},h=(m,l)=>{i.setItem(l.key,l.value)};return(m,l)=>{const c=B("n-h3"),u=B("n-icon"),d=B("n-space"),_=B("n-divider"),y=B("n-text"),T=B("n-switch"),R=B("n-input-number"),O=B("n-select"),L=B("n-tooltip"),P=B("n-list-item"),W=B("n-list"),j=B("n-modal");return S(),I(j,{show:f.value,"onUpdate:show":l[0]||(l[0]=E=>f.value=E),onAfterLeave:g},{default:x(()=>[A(W,{bordered:"",class:"go-system-setting"},{header:x(()=>[A(d,{justify:"space-between"},{default:x(()=>[A(c,{class:"go-mb-0"},{default:x(()=>[_e("\u7CFB\u7EDF\u8BBE\u7F6E")]),_:1}),A(u,{size:"20",class:"go-cursor-pointer",onClick:g},{default:x(()=>[A(s(o))]),_:1})]),_:1})]),default:x(()=>[(S(!0),X(ge,null,me(C,E=>(S(),I(P,{key:E.key},{default:x(()=>[E.type==="divider"?(S(),I(_,{key:0,style:{margin:"0"}})):(S(),I(d,{key:1,size:40},{default:x(()=>[A(d,null,{default:x(()=>[A(y,{class:"item-left"},{default:x(()=>[_e(ue(E.name),1)]),_:2},1024),E.type==="switch"?(S(),I(T,{key:0,value:E.value,"onUpdate:value":[v=>E.value=v,v=>h(v,E)],size:"small"},null,8,["value","onUpdate:value"])):E.type==="number"?(S(),I(R,{key:1,value:E.value,"onUpdate:value":[v=>E.value=v,v=>h(v,E)],class:"input-num-width",size:"small",step:E.step||null,suffix:E.suffix||null,min:E.min||0},null,8,["value","onUpdate:value","step","suffix","min"])):E.type==="select"?(S(),I(O,{key:2,class:"select-min-width",value:E.value,"onUpdate:value":[v=>E.value=v,v=>h(v,E)],size:"small",options:E.options},null,8,["value","onUpdate:value","options"])):fe("",!0)]),_:2},1024),A(d,null,{default:x(()=>[A(y,{class:"item-right"},{default:x(()=>[_e(ue(E.desc),1)]),_:2},1024),E.tip?(S(),I(L,{key:0,trigger:"hover"},{trigger:x(()=>[A(u,{size:"21"},{default:x(()=>[A(s(a))]),_:1})]),default:x(()=>[H("span",null,ue(E.tip),1)]),_:2},1024)):fe("",!0)]),_:2},1024)]),_:2},1024))]),_:2},1024))),128))]),_:1})]),_:1},8,["show"])}}});var Io=de($o,[["__scopeId","data-v-7cea0aa5"]]);const Ae=le(),Uo=()=>{Ae.setTargetSelectChart(void 0),vn(_n(Ae.getStorageInfo||[]),void 0,"json");const e=document.querySelector(".go-edit-range"),n=document.getElementById("go-edit-watermark");if(!e||!n){window.$message.error("\u5BFC\u51FA\u5931\u8D25\uFF01");return}const t=Ae.getEditCanvas.scale;Ae.setScale(1,!0),n.style.display="block",setTimeout(()=>{gn(e,()=>{n&&(n.style.display="none"),Ae.setScale(t,!0)})},600)};var at=(e=>(e.TXT="text/plain",e.JSON="application/json",e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e))(at||{});const Ho=()=>{const e=Z(),{updateComponent:n}=At();return{importUploadFileListRef:e,importBeforeUpload:({file:o})=>{e.value=[];const i=o.file.type;return i!==at.JSON&&i!==at.TXT?(window.$message.warning("\u4EC5\u652F\u6301\u4E0A\u4F20 \u3010JSON\u3011 \u683C\u5F0F\u6587\u4EF6\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0},importCustomRequest:o=>{const{file:i}=o;mn(()=>{i.file?Cn(i.file).then(f=>{kn({message:"\u8BF7\u9009\u62E9\u5BFC\u5165\u65B9\u5F0F:",positiveText:"\u65B0\u589E\uFF08\u53EF\u64A4\u56DE\uFF09",negativeText:"\u8986\u76D6\uFF08\u4E0D\u53EF\u64A4\u56DE\uFF09",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>Fe(void 0,null,function*(){try{f=Qe(f),yield n(f,!1,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(C){console.log(C),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}}),onNegativeCallback:()=>Fe(void 0,null,function*(){try{f=Qe(f),yield n(f,!0,!0),window.$message.success("\u5BFC\u5165\u6210\u529F\uFF01")}catch(C){console.log(C),window.$message.error("\u7EC4\u4EF6\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u5B8C\u6574\u6027!")}})})}):window.$message.error("\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6570\u636E\u6216\u8054\u7CFB\u7BA1\u7406\u5458\uFF01")})}}},{updateComponent:Po,dataSyncUpdate:Ft}=At(),Ko=le(),No=()=>{const e=i=>Po(i.detail,!0,!1),n=()=>Fe(void 0,null,function*(){Ft&&(yield Ft()),dispatchEvent(new CustomEvent(ze.CHART,{detail:Ko.getStorageInfo}))}),t=()=>{addEventListener("blur",n),addEventListener(ze.JSON,e)},a=()=>{removeEventListener(ze.JSON,e),removeEventListener("blur",n)};return(i,f)=>{f==Ct.CHART_HOME_NAME&&a(),i==Ct.CHART_HOME_NAME&&t()}},Yo=()=>{const e=Lt();ve(()=>e.name,No(),{immediate:!0})};var ye=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(ye||{});const Go={class:"btn-item"},Xo=ie({__name:"index",setup(e){const{DownloadIcon:n,ShareIcon:t,PawIcon:a,SettingsSharpIcon:o,CreateIcon:i}=Te.ionicons5,f=ct(),C=le();Lt(),Yo();let g=null;const h=Z(!1),m=Z(!0),l=Z(!0),{importUploadFileListRef:c,importCustomRequest:u,importBeforeUpload:d}=Ho(),_=U(()=>f.getChartToolsStatus===Pe.ASIDE),y=U(()=>f.getChartToolsStatusHide),T=U(()=>m.value&&y.value),R=U(()=>{if(!_.value)return j;const E=[];return j.map(v=>{E.unshift(v)}),E}),O=()=>{g=setTimeout(()=>{m.value&&(m.value=!1,l.value=!0)},200),setTimeout(()=>{l.value=!1},400)},L=()=>{clearTimeout(g),m.value||(m.value=!0)},P=()=>{window.$message.warning("\u5C06\u5F00\u542F\u5931\u7126\u66F4\u65B0\uFF01"),setTimeout(()=>{const E=En(Sn.CHART_EDIT_NAME,"href");if(!E)return;const v=wn();W(v),Tn(E,[v],void 0,!0)},1e3)},W=E=>{const v=C.getStorageInfo,$=xn(Be.GO_CHART_STORAGE_LIST)||[];if($!=null&&$.length){const K=$.findIndex(z=>z.id===E);K!==-1?($.splice(K,1,Ee(Y({},v),{id:E})),Je(Be.GO_CHART_STORAGE_LIST,$)):($.push(Ee(Y({},v),{id:E})),Je(Be.GO_CHART_STORAGE_LIST,$))}else Je(Be.GO_CHART_STORAGE_LIST,[Ee(Y({},v),{id:E})])},j=[{key:"import",type:ye.IMPORTUPLOAD,name:"\u5BFC\u5165",icon:t},{key:"export",type:ye.BUTTON,name:"\u5BFC\u51FA",icon:n,handle:Uo},{key:"edit",type:ye.BUTTON,name:"\u7F16\u8F91",icon:i,handle:P},{key:"setting",type:ye.BUTTON,name:"\u8BBE\u7F6E",icon:o,handle:()=>{h.value=!0}}];return(E,v)=>{const $=B("n-icon"),K=B("n-text"),z=B("n-button"),w=B("n-upload"),r=B("n-tooltip");return S(),X(ge,null,[H("div",{class:he(["go-chart-edit-tools",[s(f).getChartToolsStatus,s(T)?"isMini":"unMini"]]),onClick:v[1]||(v[1]=p=>m.value&&(m.value=!1)),onMouseenter:O,onMouseleave:L},[je(A($,{class:"asideLogo",size:"22"},{default:x(()=>[A(s(a))]),_:1},512),[[qe,s(f).getChartToolsStatus===s(Pe).ASIDE&&s(T)]]),(S(!0),X(ge,null,me(s(R),(p,k)=>(S(),I(r,{key:p.key,disabled:!s(_)||s(y)&&l.value,trigger:"hover",placement:"left"},{trigger:x(()=>[H("div",Go,[p.type===s(ye).BUTTON?(S(),I(z,{key:0,circle:s(_),secondary:"",onClick:p.handle},{icon:x(()=>[s(_)?(S(),I($,{key:0,size:"22"},{default:x(()=>[(S(),I(Se(p.icon)))]),_:2},1024)):(S(),I(Se(p.icon),{key:1}))]),default:x(()=>[je(A(K,{depth:"3"},{default:x(()=>[_e(ue(p.name),1)]),_:2},1536),[[qe,!s(_)]])]),_:2},1032,["circle","onClick"])):p.type===s(ye).IMPORTUPLOAD?(S(),I(w,{key:1,"file-list":s(c),"onUpdate:fileList":v[0]||(v[0]=b=>yn(c)?c.value=b:null),"show-file-list":!1,customRequest:s(u),onBeforeUpload:s(d)},{default:x(()=>[A(z,{circle:s(_),secondary:""},{icon:x(()=>[s(_)?(S(),I($,{key:0,size:"22"},{default:x(()=>[(S(),I(Se(p.icon)))]),_:2},1024)):(S(),I(Se(p.icon),{key:1}))]),default:x(()=>[je(A(K,{depth:"3"},{default:x(()=>[_e(ue(p.name),1)]),_:2},1536),[[qe,!s(_)]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):fe("",!0)])]),default:x(()=>[H("span",null,ue(p.name),1)]),_:2},1032,["disabled"]))),128))],34),A(s(Io),{modelShow:h.value,"onUpdate:modelShow":v[2]||(v[2]=p=>h.value=p)},null,8,["modelShow"])],64)}}});var Wo=de(Xo,[["__scopeId","data-v-4c257f27"]]);const zo=ie({__name:"index",setup(e){const n=le(),{handleContextMenu:t}=dt();Rn();const{mouseenterHandle:a,mouseleaveHandle:o,mousedownHandle:i,mouseClickHandle:f}=Bt(),C=(l,c,u)=>{if(n.getTargetChart.selectId.length>1)return c.filter(_=>[D.GROUP,D.DELETE].includes(_.key));const d=[];return u.status.lock?d.push(D.LOCK):d.push(D.UNLOCK),u.status.hide?d.push(D.HIDE):d.push(D.SHOW),l.filter(_=>!d.includes(_.key))},g=U(()=>n.getEditCanvasConfig.chartThemeSetting),h=U(()=>{const l=n.getEditCanvasConfig.chartThemeColor;return Dt[l]});U(()=>n.getEditCanvasConfig.filterShow);const m=U(()=>{const l=n.getEditCanvasConfig.background,c=n.getEditCanvasConfig.backgroundImage,_=n.getEditCanvasConfig.selectColor?{background:l||void 0}:{background:`url(${c}) no-repeat center center / cover !important`};return Ee(Y({},_),{width:"inherit",height:"inherit"})});return rt(()=>{$n()}),(l,c)=>(S(),I(s(bn),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:s(Ot),onDrop:s(Un),onDragover:s(Et),onDragenter:s(Et)},{aside:x(()=>[A(s(Wo))]),bottom:x(()=>[A(s(Mo))]),default:x(()=>[A(s(io),null,{default:x(()=>[H("div",{id:"go-chart-edit-content",onContextmenu:c[0]||(c[0]=(...u)=>s(t)&&s(t)(...u))},[A(s(no),null,{default:x(()=>[H("div",{style:se(Y(Y({},s(He)(s(n).getEditCanvasConfig)),s(m)))},[(S(!0),X(ge,null,me(s(n).getComponentList,(u,d)=>(S(),X("div",{key:u.id},[u.isGroup?(S(),I(s(Gn),{key:0,groupData:u,groupIndex:d},null,8,["groupData","groupIndex"])):(S(),I(s(nt),{key:1,"data-id":u.id,index:d,style:se(Y(Y({},s(Ue)(u.attr,d)),s(bt)(u.styles))),item:u,onClick:_=>s(f)(_,u),onMousedown:_=>s(i)(_,u),onMouseenter:_=>s(a)(_,u),onMouseleave:_=>s(o)(_,u),onContextmenu:_=>s(t)(_,u,C)},{default:x(()=>{var _,y,T,R;return[s(Zt)(u)&&!((_=u.option)!=null&&_.isDeleted)?(S(),I(s(Qt),{key:0,title:s(en)(u),attr:u.attr,titleSize:s(tn)(u),titleStyle:s(nn)(u)},null,8,["title","attr","titleSize","titleStyle"])):fe("",!0),s(on)(u)&&!((y=u.option)!=null&&y.isDeleted)?(S(),I(s(sn),{key:1,class:"filter-content",componentIdx:u.id,attr:u.attr,filters:u.chartConfig.filters,type:u.chartConfig.category},null,8,["componentIdx","attr","filters","type"])):fe("",!0),(T=u.option)!=null&&T.isDeleted?(S(),I(s(Ln),{key:2,item:u,style:se(Ee(Y({},s(vt)(u.attr,0)),{lineHeight:u.attr.h+"px"}))},null,8,["item","style"])):fe("",!0),(R=u.option)!=null&&R.isDeleted?fe("",!0):(S(),I(Se(u.chartConfig.chartKey),{key:3,class:he(["edit-content-chart",s(et)(u.styles.animations)]),chartConfig:u,themeSetting:s(g),themeColor:s(h),style:se(Y(Y(Y({},s(vt)(u.attr,s(an)(u)+s(rn)(u))),s(He)(u.styles)),s(tt)(u.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]}),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});var as=de(zo,[["__scopeId","data-v-f20efb74"]]);export{as as default};
